webpackJsonp([1],{"+L4n":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("3cXf"),i=n.n(s),o=n("4YfN"),r=n.n(o),a=n("9rMa"),l={name:"ToggleSwitch",data:function(){return{toggled:1==this.value}},props:{value:{type:Number,default:1},speed:{type:Number,default:100},labelChecked:{type:String,default:"启用"},labelUnchecked:{type:String,default:"停用"},colorChecked:{type:String,default:"#11CED2"},colorUnchecked:{type:String,default:"#E6EAF1"}},watch:{value:function(e){console.log("val ===="+e),this.value=e}},methods:{toggle:function(e){console.log("toggle...."+i()(e)),this.toggled=!this.toggled,console.log("toggled ==="+this.toggled),this.$emit("update:value",this.toggled?1:0),this.$emit("change",e)}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{class:["switch",{toggled:e.toggled}],attrs:{role:"checkbox"}},[n("input",{staticClass:"switch-input",attrs:{type:"checkbox"},on:{change:e.toggle}}),e._v(" "),n("div",{staticClass:"switch-core",style:{backgroundColor:e.toggled?e.colorChecked:e.colorUnchecked}},[n("div",{staticClass:"switch-button",style:{transition:"transform "+e.speed+"ms",transform:e.toggled?null:"translate3d(32px, 0px, 0px)"}})]),e._v(" "),e.toggled?n("span",{staticClass:"switch-label label-right",domProps:{innerHTML:e._s(e.labelChecked)}}):n("span",{staticClass:"switch-label label-left",domProps:{innerHTML:e._s(e.labelUnchecked)}})])},staticRenderFns:[]};var d={components:{toggleswitch:n("/Xao")(l,c,!1,function(e){n("Wgcz")},"data-v-7517ddcf",null).exports},data:function(){return{totalCount:0,list:[],listLoading:!1,listQuery:{pageNum:1,pageRow:50},roles:[],dialogStatus:"create",dialogFormVisible:!1,textMap:{update:"编辑",create:"新建用户"},tempUser:{username:"",password:"",nickname:"",roleId:"",id:"",email:"",phone:""}}},created:function(){this.getList(),(this.hasPerm("user:add")||this.hasPerm("user:update"))&&this.getAllRoles()},computed:r()({},Object(a.b)(["userId"])),methods:{getAllRoles:function(){var e=this;this.api({url:"/user/getAllRoles",method:"get"}).then(function(t){e.roles=t.data})},getList:function(){var e=this;console.log("getlist ==== "),this.listLoading=!0,this.api({url:"/user/list",method:"get",params:this.listQuery}).then(function(t){e.listLoading=!1,e.list=t.data.records,e.totalCount=t.data.pages})},handleSizeChange:function(e){this.listQuery.pageRow=e,this.handleFilter()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.getList()},handleFilter:function(){this.listQuery.pageNum=1,this.getList()},getIndex:function(e){return(this.listQuery.pageNum-1)*this.listQuery.pageRow+e+1},showCreate:function(){this.tempUser.username="",this.tempUser.password="",this.tempUser.nickname="",this.tempUser.phone="",this.tempUser.email="",this.tempUser.roleId="",this.tempUser.id="",this.dialogStatus="create",this.dialogFormVisible=!0},showUpdate:function(e){var t=this.list[e];this.tempUser.username=t.username,this.tempUser.nickname=t.nickname,this.tempUser.email=t.email,this.tempUser.phone=t.phone,this.tempUser.roleId=t.roleInfo.id,this.tempUser.id=t.id,this.tempUser.deleteStatus="1",this.tempUser.password="",this.dialogStatus="update",this.dialogFormVisible=!0},createUser:function(){var e=this;this.api({url:"/user/addUser",method:"post",data:this.tempUser}).then(function(){e.getList(),e.dialogFormVisible=!1})},updateUser:function(){var e=this,t=this;this.api({url:"/user/updateUser",method:"post",data:this.tempUser}).then(function(){var n="修改成功";e.dialogFormVisible=!1,e.id===e.tempUser.id&&(n="修改成功,部分信息重新登录后生效"),e.$message({message:n,type:"success",duration:1e3,onClose:function(){t.getList()}})})},removeUser:function(e){var t=this;this.$confirm("确定删除此用户?","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning"}).then(function(){var n=t.list[e];n.deleteStatus="2",t.api({url:"/user/updateUser",method:"post",data:n}).then(function(){t.getList()}).catch(function(){t.$message.error("删除失败")})})},switchChange:function(e){var t=this;console.log("change...."+i()(e));var n=this;this.api({url:"/user/switch/status",method:"post",data:e}).then(function(){var e="修改成功";t.dialogFormVisible=!1,t.id===t.tempUser.id&&(e="修改成功,部分信息重新登录后生效"),t.$message({message:e,type:"success",duration:1e3,onClose:function(){console.log("haha"),n.list=[],n.getList()}})})}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-form",[n("el-form-item",[e.hasPerm("user:add")?n("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.showCreate}},[e._v("添加\n        ")]):e._e()],1)],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.list,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{domProps:{textContent:e._s(e.getIndex(t.$index))}})]}}])}),e._v(" "),n("el-table-column",{staticStyle:{width:"20px"},attrs:{align:"center",label:"昵称",prop:"nickname"}}),e._v(" "),n("el-table-column",{staticStyle:{width:"20px"},attrs:{align:"center",label:"用户名",prop:"username"}}),e._v(" "),n("el-table-column",{staticStyle:{width:"20px"},attrs:{align:"center",label:"手机号",prop:"phone"}}),e._v(" "),n("el-table-column",{staticStyle:{width:"20px"},attrs:{align:"center",label:"邮箱",prop:"email"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"角色",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.roleInfo.id?n("el-tag",{attrs:{type:"success"},domProps:{textContent:e._s(t.row.roleInfo.roleName)}}):n("el-tag",{attrs:{type:"primary"},domProps:{textContent:e._s(t.row.roleInfo.roleName)}})]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"createTime",width:"170"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"最近修改时间",prop:"updateTime",width:"170"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"上次登录时间",prop:"lastLoginTime",width:"170"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"启用",prop:"isLock",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("toggleswitch",{attrs:{value:t.row.isLock},on:{"update:value":function(n){e.$set(t.row,"isLock",n)},change:function(n){e.switchChange(t.row)}},model:{value:t.row.isLock,callback:function(n){e.$set(t.row,"isLock",n)},expression:"scope.row.isLock"}})]}}])}),e._v(" "),e.hasPerm("user:update")?n("el-table-column",{attrs:{align:"center",label:"管理",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",icon:"edit"},on:{click:function(n){e.showUpdate(t.$index)}}},[e._v("修改")]),e._v(" "),t.row.userId!=e.userId?n("el-button",{attrs:{type:"danger",icon:"delete"},on:{click:function(n){e.removeUser(t.$index)}}},[e._v("删除\n        ")]):e._e()]}}])}):e._e()],1),e._v(" "),n("el-pagination",{attrs:{"current-page":e.listQuery.pageNum,"page-size":e.listQuery.pageRow,total:e.totalCount,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),n("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{staticClass:"small-space",staticStyle:{width:"300px","margin-left":"50px"},attrs:{model:e.tempUser,"label-position":"left","label-width":"80px"}},["create"==e.dialogStatus?n("el-form-item",{attrs:{label:"用户名",required:""}},[n("el-input",{attrs:{type:"text"},model:{value:e.tempUser.username,callback:function(t){e.$set(e.tempUser,"username",t)},expression:"tempUser.username"}})],1):e._e(),e._v(" "),"create"==e.dialogStatus?n("el-form-item",{attrs:{label:"密码",required:""}},[n("el-input",{attrs:{type:"password"},model:{value:e.tempUser.password,callback:function(t){e.$set(e.tempUser,"password",t)},expression:"tempUser.password"}})],1):n("el-form-item",{attrs:{label:"新密码"}},[n("el-input",{attrs:{type:"password",placeholder:"不填则表示不修改"},model:{value:e.tempUser.password,callback:function(t){e.$set(e.tempUser,"password",t)},expression:"tempUser.password"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"角色",required:""}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.tempUser.roleId,callback:function(t){e.$set(e.tempUser,"roleId",t)},expression:"tempUser.roleId"}},e._l(e.roles,function(e){return n("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"昵称",required:""}},[n("el-input",{attrs:{type:"text"},model:{value:e.tempUser.nickname,callback:function(t){e.$set(e.tempUser,"nickname",t)},expression:"tempUser.nickname"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"手机号",required:""}},[n("el-input",{attrs:{type:"text"},model:{value:e.tempUser.phone,callback:function(t){e.$set(e.tempUser,"phone",t)},expression:"tempUser.phone"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"邮箱",required:""}},[n("el-input",{attrs:{type:"text"},model:{value:e.tempUser.email,callback:function(t){e.$set(e.tempUser,"email",t)},expression:"tempUser.email"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),"create"==e.dialogStatus?n("el-button",{attrs:{type:"success"},on:{click:e.createUser}},[e._v("创 建")]):n("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("修 改")])],1)],1)],1)},staticRenderFns:[]},p=n("/Xao")(d,u,!1,null,null,null);t.default=p.exports},"Ew1/":function(e,t,n){(e.exports=n("BkJT")(!0)).push([e.i,"\n.switch[data-v-7517ddcf] {\n  display: inline-block;\n  position: relative;\n  overflow: hidden;\n  vertical-align: middle;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  font-size: 10px;\n  cursor: pointer;\n}\n.switch .switch-input[data-v-7517ddcf] {\n    display: none;\n}\n.switch .switch-label[data-v-7517ddcf] {\n    position: absolute;\n    top: 0;\n    font-weight: 600;\n    color: white;\n    z-index: 2;\n}\n.switch .switch-label.label-left[data-v-7517ddcf] {\n      left: 10px;\n      line-height: 20px;\n      border-top-left-radius: 2px;\n      border-bottom-left-radius: 2px;\n      color: #b5bdc8;\n}\n.switch .switch-label.label-right[data-v-7517ddcf] {\n      right: 10px;\n      line-height: 20px;\n      border-top-right-radius: 2px;\n      border-bottom-right-radius: 2px;\n}\n.switch .switch-core[data-v-7517ddcf] {\n    display: block;\n    position: relative;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    outline: 0;\n    margin: 0;\n    -webkit-transition: border-color 0.3s, background-color 0.3s;\n    transition: border-color 0.3s, background-color 0.3s;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    width: 46px;\n    height: 20px;\n    border-radius: 4px;\n    line-height: 20px;\n}\n.switch .switch-core .switch-button[data-v-7517ddcf] {\n      width: 8px;\n      height: 16px;\n      display: block;\n      position: absolute;\n      overflow: hidden;\n      top: 2;\n      left: 2;\n      z-index: 3;\n      -webkit-transform: translate3d(0, 0, 0);\n              transform: translate3d(0, 0, 0);\n      background-color: white;\n      border-radius: 4px;\n      margin-top: 2px;\n      margin-left: 2px;\n}\n","",{version:3,sources:["D:/work/github/SpringBoot-Shiro-Vue-master/vue/src/components/toggleswitch/index.vue"],names:[],mappings:";AACA;EACE,sBAAsB;EACtB,mBAAmB;EACnB,iBAAiB;EACjB,uBAAuB;EACvB,0BAA0B;KACvB,uBAAuB;MACtB,sBAAsB;UAClB,kBAAkB;EAC1B,gBAAgB;EAChB,gBAAgB;CACjB;AACD;IACI,cAAc;CACjB;AACD;IACI,mBAAmB;IACnB,OAAO;IACP,iBAAiB;IACjB,aAAa;IACb,WAAW;CACd;AACD;MACM,WAAW;MACX,kBAAkB;MAClB,4BAA4B;MAC5B,+BAA+B;MAC/B,eAAe;CACpB;AACD;MACM,YAAY;MACZ,kBAAkB;MAClB,6BAA6B;MAC7B,gCAAgC;CACrC;AACD;IACI,eAAe;IACf,mBAAmB;IACnB,+BAA+B;YACvB,uBAAuB;IAC/B,WAAW;IACX,UAAU;IACV,6DAA6D;IAC7D,qDAAqD;IACrD,0BAA0B;OACvB,uBAAuB;QACtB,sBAAsB;YAClB,kBAAkB;IAC1B,YAAY;IACZ,aAAa;IACb,mBAAmB;IACnB,kBAAkB;CACrB;AACD;MACM,WAAW;MACX,aAAa;MACb,eAAe;MACf,mBAAmB;MACnB,iBAAiB;MACjB,OAAO;MACP,QAAQ;MACR,WAAW;MACX,wCAAwC;cAChC,gCAAgC;MACxC,wBAAwB;MACxB,mBAAmB;MACnB,gBAAgB;MAChB,iBAAiB;CACtB",file:"index.vue",sourcesContent:["\n.switch[data-v-7517ddcf] {\n  display: inline-block;\n  position: relative;\n  overflow: hidden;\n  vertical-align: middle;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  font-size: 10px;\n  cursor: pointer;\n}\n.switch .switch-input[data-v-7517ddcf] {\n    display: none;\n}\n.switch .switch-label[data-v-7517ddcf] {\n    position: absolute;\n    top: 0;\n    font-weight: 600;\n    color: white;\n    z-index: 2;\n}\n.switch .switch-label.label-left[data-v-7517ddcf] {\n      left: 10px;\n      line-height: 20px;\n      border-top-left-radius: 2px;\n      border-bottom-left-radius: 2px;\n      color: #b5bdc8;\n}\n.switch .switch-label.label-right[data-v-7517ddcf] {\n      right: 10px;\n      line-height: 20px;\n      border-top-right-radius: 2px;\n      border-bottom-right-radius: 2px;\n}\n.switch .switch-core[data-v-7517ddcf] {\n    display: block;\n    position: relative;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    outline: 0;\n    margin: 0;\n    -webkit-transition: border-color 0.3s, background-color 0.3s;\n    transition: border-color 0.3s, background-color 0.3s;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    width: 46px;\n    height: 20px;\n    border-radius: 4px;\n    line-height: 20px;\n}\n.switch .switch-core .switch-button[data-v-7517ddcf] {\n      width: 8px;\n      height: 16px;\n      display: block;\n      position: absolute;\n      overflow: hidden;\n      top: 2;\n      left: 2;\n      z-index: 3;\n      -webkit-transform: translate3d(0, 0, 0);\n              transform: translate3d(0, 0, 0);\n      background-color: white;\n      border-radius: 4px;\n      margin-top: 2px;\n      margin-left: 2px;\n}\n"],sourceRoot:""}])},Wgcz:function(e,t,n){var s=n("Ew1/");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);n("8bSs")("40b364fc",s,!0)}});